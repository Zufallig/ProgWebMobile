<!DOCTYPE html>
<html lang="fr">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tron</title>

    <!-- Police stylisée pour effet futuriste -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link href="./tron.css" rel="stylesheet">

    <script src="./JS/connexion.js"></script>
    <script src="./JS/controle.js"></script>
    <script src="./JS/lobby.js"></script>
    <script src="./JS/game.js"></script>
    <script src="./JS/websocket.js"></script>
    <script src="./JS/leaderboard.js"></script>
  </head>

  <body>

    <!-- Écran de connexion -->
    <section id="loginScreen" class="screen" style="display: flex;">
      <h1>Connexion</h1>
      <input id="loginInput" placeholder="Login">
      <input id="passwordInput" type="password" placeholder="Mot de passe">
      <button onclick="validateLogin()">Continuer</button>
    </section>

    <!-- Menu principal -->
    <section id="homeScreen" class="screen">
      <h2>Bienvenue <span id="usernameDisplay"></span></h2>
      <button onclick="goToLobby()">Jouer</button>
      <button onclick="goToLeaderboard()">Classement</button>
    </section>

    <!-- Classement -->
    <section id="leaderboardScreen" class="screen">
      <h2>Classement</h2>
      <div id="playerList"></div>
      <button onclick="goToHome()">Accueil</button>
    </section>

    <!-- Lobby -->
    <section id="lobbyScreen" class="screen">
      <h2>Lobby</h2>
      <p id="connectedUser" style="font-size: 0.9rem; opacity: 0.8;"></p>
      <button onclick="toggleLobbyForm()">Créer un lobby</button>
	  <input id="lobbySearchInput" placeholder="Rechercher un lobby ou un joueur..." oninput="filterLobbies()" style="width: 230px; margin-top: 10px;"/>
      <div id="createLobbyForm">
        <input id="lobbyNameInput" placeholder="Nom du lobby">
        <input id="maxPlayersInput" type="number" min="2" max="4" value="2">
        <button onclick="createLobby()">Créer</button>
      </div>

      <div id="lobbyList"></div>
	  <div id="paginationControls" style="margin-top:10px; display:flex; gap:10px; align-items:center;"></div>

      <button onclick="goToHome()">Accueil</button>
    </section>


    <!-- Écran de jeu -->
    <section id="gameScreen" class="screen" style="flex-direction: column;">
      <div id="hud">
		<!-- Choix de couleur -->
		  <div id="colorSelection">
			<p style="margin:5px 0;">Choisis ta couleur :</p>
			 <div class="colorButtons">
			   <div class="colorOption">
				 <button class="colorBtn" style="background:#00ffff" onclick="chooseColor('#00ffff')"></button>
				 <span class="colorLabel" data-color="#00ffff"></span>
			   </div>
			   <div class="colorOption">
				 <button class="colorBtn" style="background:#ff00ff" onclick="chooseColor('#ff00ff')"></button>
				 <span class="colorLabel" data-color="#ff00ff"></span>
			   </div>
			   <div class="colorOption">
				 <button class="colorBtn" style="background:#00ff00" onclick="chooseColor('#00ff00')"></button>
				 <span class="colorLabel" data-color="#00ff00"></span>
			   </div>
			   <div class="colorOption">
				 <button class="colorBtn" style="background:#ffff00" onclick="chooseColor('#ffff00')"></button>
				 <span class="colorLabel" data-color="#ffff00"></span>
			   </div>
			 </div>
		  </div>
        <button id="readyBtn" onclick="setReady()">Prêt ?</button>
      </div>
      <svg id="svgCanvas" xmlns="http://www.w3.org/2000/svg" width="300" height="300"></svg>
	  <button id="quit" onclick="goToHome()">Quitter</button>
    </section>

    <!-- Contrôles tactiles -->
    <section id="globalMobileControls">
      <div><button class="controlBtn" onclick="setDirection('up')">↑</button></div>
      <div class="middleRow">
        <button class="controlBtn" onclick="setDirection('left')">←</button>
        <button class="controlBtn" onclick="setDirection('down')">↓</button>
        <button class="controlBtn" onclick="setDirection('right')">→</button>
      </div>
    </section>

    <!-- Écran de fin de jeu -->
    <section id="gameEndedScreen" class="screen">
      <h2>Fin de la partie</h2>
      <p id="gameEndText"></p>
      <button id="restartBtn" onclick="restartGame()">Rejouer</button>
      <button onclick="goToHome()">Accueil</button>
    </section>

    <!-- Écran d'erreur -->
    <section id="errorScreen">
      <h2>Erreur</h2>
      <p id="errorText"></p>
      <button onclick="closeErrorScreen()">OK</button>
    </section>


  </body>

</html>