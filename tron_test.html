<!DOCTYPE html>
<html lang="fr">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tron</title>

    <!-- Police stylisée pour effet futuriste -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link href="./tron.css" rel="stylesheet">

    <script src="./JS/connexion.js"></script>
    <script src="./JS/controle.js"></script>
    <script src="./JS/lobby.js"></script>
    <script src="./JS/game.js"></script>
    <script src="./JS/websocket.js"></script>
  </head>

  <body>

    <!-- Écran de connexion -->
    <section id="loginScreen" class="screen" style="display: flex;">
      <h1>Connexion</h1>
      <input id="loginInput" placeholder="Login">
      <input id="passwordInput" type="password" placeholder="Mot de passe">
      <button onclick="validateLogin()">Continuer</button>
    </section>

    <!-- Menu principal -->
    <section id="homeScreen" class="screen">
      <h2>Bienvenue <span id="usernameDisplay"></span></h2>
      <label>Couleur de la traînée :</label>
      <input type="color" id="colorPicker" value="#00ffff">
      <button onclick="goToLobby()">Jouer</button>
    </section>

    <!-- Lobby -->
    <section id="lobbyScreen" class="screen">
      <h2>Lobby</h2>
      <p id="connectedUser" style="font-size: 0.9rem; opacity: 0.8;"></p>
      <button onclick="toggleLobbyForm()">Créer un lobby</button>

      <div id="createLobbyForm">
        <input id="lobbyNameInput" placeholder="Nom du lobby">
        <input id="maxPlayersInput" type="number" min="2" max="4" value="2">
        <button onclick="createLobby()">Créer</button>
      </div>

      <div id="lobbyList"></div>
      <button onclick="goToHome()">Accueil</button>
    </section>


    <!-- Écran de jeu -->
    <section id="gameScreen" class="screen" style="flex-direction: column;">
      <div>
        <div>0/2 prêt</div>
        <button id="readyButton" onclick="readyGame()">Ready</button>
      </div>
      <div id="hud">
        <span id="scoreDisplay">Score: 0</span>
      </div>
      <svg id="svgCanvas" xmlns="http://www.w3.org/2000/svg" width="300" height="300"></svg>
    </section>

    <!-- Contrôles tactiles -->
    <section id="globalMobileControls">
      <div><button class="controlBtn" onclick="setDirection('up')">↑</button></div>
      <div class="middleRow">
        <button class="controlBtn" onclick="setDirection('left')">←</button>
        <button class="controlBtn" onclick="setDirection('down')">↓</button>
        <button class="controlBtn" onclick="setDirection('right')">→</button>
      </div>
    </section>

    <!-- Écran de fin de jeu -->
    <section id="gameOverScreen">
      <h2>Game Over</h2>
      <p id="finalScoreText"></p>
      <button onclick="restartGame()">Rejouer</button>
      <button onclick="goToHome()">Accueil</button>
    </section>
  </body>

</html>